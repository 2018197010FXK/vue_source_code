{"version":3,"file":"vue.js","sources":["../src/utils.js","../src/globalAPI.js","../src/complier/parse.js","../src/complier/index.js","../src/observe/dep.js","../src/observe/watcher.js","../src/vdom/index.js","../src/lifeCycle.js","../src/observe/array.js","../src/observe/index.js","../src/state.js","../src/init.js","../src/index.js"],"sourcesContent":["\r\n const starts = {}\r\n const LIFECYCLE = [\r\n     'beforeCreate',\r\n     'created'\r\n ]\r\n\r\n LIFECYCLE.forEach(hook => {\r\n     starts[hook] = function (p, c) {\r\n        debugger\r\n         if (c) { // 如果儿子又，父亲没有，则将儿子包装成数组\r\n             if (p) {\r\n                 return p.concat(c) //儿子有父亲没有，则将儿子包装成数组\r\n             } else {\r\n                 return [c]\r\n             }\r\n         } else {\r\n             return p // 如果儿子没有，则用父亲即可\r\n         }\r\n     }\r\n })\r\nexport function mereOptions(parent,child){\r\n    const options = {}\r\n\r\n    \r\n    for(let key in parent){\r\n        mergeField(key)\r\n    }\r\n\r\n    for(let key in child){\r\n        if(!parent.hasOwnProperty(key)){\r\n            mergeField(key)\r\n        }\r\n    }\r\n\r\n    function mergeField(key){\r\n        // 策略模式\r\n        if(starts[key]){\r\n           options[key] = starts[key](parent[key],child[key])\r\n        }else{\r\n            options[key] = child[key] || parent[key]\r\n        }\r\n\r\n    }\r\n    return options\r\n}","import {\r\n    mereOptions\r\n} from \"./utils\"\r\n\r\nexport function initGlobalAPI(Vue) {\r\n    Vue.options = {}\r\n   \r\n\r\n    Vue.mixin = function (mixin) {\r\n        // 期望将用户的选项和全局的options进行合并\r\n        this.options = mereOptions(this.options, mixin)\r\n        return this\r\n    }\r\n\r\n}","const ncname = `[a-zA-Z_][\\\\-\\\\.0-9_a-zA-Z]*`;\r\nconst qnameCapture = `((?:${ncname}\\\\:)?${ncname})`;\r\nconst startTagOpen = new RegExp(`^<${qnameCapture}`); // 他匹配到的分组是一个 标签名  <xxx 匹配到的是开始 标签的名字\r\nconst endTag = new RegExp(`^<\\\\/${qnameCapture}[^>]*>`); // 匹配的是</xxxx>  最终匹配到的分组就是结束标签的名字\r\nconst attribute = /^\\s*([^\\s\"'<>\\/=]+)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?/; // 匹配属性\r\n// 第一个分组就是属性的key value 就是 分组3/分组4/分组五\r\nconst startTagClose = /^\\s*(\\/?)>/; // <div> <br/>\r\n\r\n\r\nexport function parseHTML(html) {\r\n  let ELEMENT_TYPE = 1\r\n  let TEXT_TYPE = 3\r\n  let root\r\n  let currentParent // 指向当前父元素\r\n  const stack = [] // \r\n\r\n  function createASTElement(tag, attrs) {\r\n    return {\r\n      tag,\r\n      type: ELEMENT_TYPE,\r\n      attrs,\r\n      parent: null,\r\n      children: []\r\n    }\r\n\r\n  }\r\n\r\n  function start(tag, attrs) {\r\n    // 创建节点\r\n    let node = createASTElement(tag, attrs)\r\n    // 如果没有根节点，创建的节点就为根节点\r\n    if (!root) {\r\n      root = node\r\n    }\r\n    if (currentParent) {\r\n      node.parent = currentParent\r\n      currentParent.children.push(node)\r\n    }\r\n    stack.push(node)\r\n    currentParent = node // currentParent为栈中的最后一个\r\n  }\r\n\r\n  function chars(text) {\r\n    text = text.trim()\r\n    text && currentParent.children.push({\r\n      text,\r\n      type: TEXT_TYPE,\r\n      parent: currentParent\r\n    })\r\n  }\r\n\r\n  function end() {\r\n    let node = stack.pop()\r\n    currentParent = stack[stack.length - 1]\r\n  }\r\n\r\n  // 删除html已经匹配到的\r\n  function advance(n) {\r\n    html = html.substring(n)\r\n  }\r\n\r\n  // 匹配开始标签\r\n  function parseStartTag() {\r\n    const start = html.match(startTagOpen)\r\n    if (start) {\r\n      const match = {\r\n        tagName: start[1],\r\n        attrs: []\r\n      }\r\n\r\n      advance(start[0].length)\r\n\r\n      let attr, end\r\n      // 非结束标签就一直匹配\r\n      while (!(end = html.match(startTagClose)) && (attr = html.match(attribute))) {\r\n        advance(attr[0].length)\r\n        match.attrs.push({\r\n          key: attr[1],\r\n          value: attr[3] || attr[4] || attr[5]\r\n        })\r\n      }\r\n      // 删除匹配到的结束标签\r\n      if (end) {\r\n        advance(end[0].length)\r\n      }\r\n\r\n      return match\r\n    }\r\n\r\n    return false // 表示未匹配到开始标签\r\n\r\n  }\r\n\r\n  while (html) {\r\n    const textEnd = html.indexOf('<') //如果不为0，表示为文本结束的位置\r\n\r\n    if (textEnd === 0) {\r\n      // 匹配开始标签\r\n      const startTagMatch = parseStartTag()\r\n      if (startTagMatch) {\r\n        start(startTagMatch.tagName, startTagMatch.attrs)\r\n        continue\r\n      }\r\n      // 匹配结束标签\r\n      let endTagMatch = html.match(endTag)\r\n      if (endTagMatch) {\r\n        advance(endTagMatch[0].length)\r\n        end(endTagMatch.tagName)\r\n        continue\r\n      }\r\n    }\r\n\r\n    if (textEnd > 0) {\r\n      let text = html.substring(0, textEnd)\r\n      if (text) {\r\n        advance(text.length)\r\n        chars(text)\r\n      }\r\n    }\r\n\r\n  }\r\n  return root\r\n}","import {\r\n  parseHTML\r\n} from \"./parse\";\r\n\r\n\r\nfunction genProps(attrs) {\r\n  let str = ''\r\n  attrs.forEach(item => {\r\n    if (item.key === \"style\") {\r\n      const styleArr = item.value.split(';')\r\n      const obj = {}\r\n      styleArr.forEach(styl => {\r\n        const [key, value] = styl.split(':')\r\n        obj[key] = value\r\n      })\r\n      item.value = obj\r\n    }\r\n    str += `${item.key}: ${JSON.stringify(item.value)},`\r\n\r\n  });\r\n  return `{${str.slice(0,-1)}}`\r\n}\r\nconst defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g // {{afadf}} 匹配到的分组就是结束标签的名字\r\n\r\nfunction gen(node) {\r\n  if (node.type === 1) {\r\n    return codegen(node)\r\n  } else {\r\n    // 文本\r\n    let text = node.text\r\n    if (!defaultTagRE.test(text)) {\r\n      return `_v(${JSON.stringify(text)})`\r\n    } else {\r\n      let token = []\r\n      let match\r\n      let lastIndex = 0\r\n      defaultTagRE.lastIndex = 0\r\n      while (match = defaultTagRE.exec(text)) {\r\n        let index = match.index\r\n        if (index > lastIndex) {\r\n          token.push(JSON.stringify(text.slice(lastIndex, index)))\r\n        }\r\n        token.push(`_s(${match[1].trim()})`)\r\n        lastIndex = index + match[0].length\r\n      }\r\n      if (lastIndex < text.length) {\r\n        token.push(text.slice(lastIndex))\r\n      }\r\n      return `_v(${token.join('+')})`\r\n    }\r\n\r\n  }\r\n\r\n}\r\n\r\nfunction genChildren(children) {\r\n  return children.map(child => gen(child)).join(',')\r\n}\r\n\r\nfunction codegen(ast) {\r\n  let children = genChildren(ast.children)\r\n  let code = (`_c('${ast.tag}',\r\n  ${ast.attrs.length > 0 ? genProps(ast.attrs):null }\r\n  ${ast.children.length ? `,${children}`:''}\r\n  )`)\r\n  return code\r\n}\r\n\r\nexport function compliToFunction(template) {\r\n  // 1.将template 转化成ast语法树\r\n  let ast = parseHTML(template)\r\n  // 2.生成render方法，（render方法执行后返回的结果就是 虚拟DOM）\r\n  let code = codegen(ast)\r\n\r\n  // 任何模板引擎的实现方式都是 with + new Function\r\n  code = `with(this){\r\n    return ${code}\r\n  }`\r\n\r\n  let render = new Function(code)\r\n\r\n  return render\r\n\r\n\r\n/*   (function anonymous(\r\n    ) {\r\n    with(this){\r\n        return _c('div',\r\n      {id: \"app\",class: \"hhh\",style: {\"color\":\" red\"}}\r\n      ,_c('span',\r\n      null\r\n      ,_v(_s(name)+\"Hello world\"+_s(name))\r\n      ))}\r\n    }) */\r\n}","\r\nlet id = 0\r\nexport class Dep{\r\n    constructor(){\r\n        this.id = id++\r\n        this.subs = []\r\n    }\r\n    depend(){\r\n        // this.sups.push(watcher) 这种方式会重复\r\n        // 让watcher 去记录dep\r\n        debugger\r\n        Dep.target.addDep(this)\r\n    }\r\n    addWatcher(watcher){\r\n        this.subs.push(watcher)\r\n    }\r\n    notify(){\r\n        debugger\r\n        this.subs.forEach(watcher=>{ watcher.update()})\r\n    }\r\n}\r\n\r\nDep.target = null\r\n\r\nconst stack = []\r\nexport  function pushTarget(watcher){\r\n    stack.push(watcher)\r\n    Dep.target = watcher\r\n}\r\n\r\nexport function popTarget(){\r\n    stack.pop()\r\n    Dep.target = stack[stack.length-1]\r\n}\r\n\r\n\r\n\r\nlet has = {}","import { Dep, popTarget, pushTarget } from \"./dep\"\r\n// watcher 与dep\r\nlet id = 0\r\nexport class wtacher{\r\n    constructor(vm,exprOrFn,options,cb){\r\n        this.id = id++\r\n        this.randerWatcher = options // 是不是渲染函数\r\n        if(typeof exprOrFn === 'string'){\r\n            this.getter = function(){\r\n                return vm[exprOrFn]\r\n            }\r\n        }else{\r\n            this.getter = exprOrFn\r\n        }\r\n        this.cb = cb\r\n        this.deps= []\r\n        this.depsId = new Set() // 存放已经获取过dep的id\r\n        this.vm = vm\r\n        this.options = options\r\n        this.dirty = options.lazy\r\n        this.lazy = options.lazy\r\n        this.value = this.lazy ? undefined : this.get()\r\n    }\r\n    addDep(dep){\r\n        let id = dep.id // 获取id\r\n        if(!this.depsId.has(id)){ // 如果还未记录过该dep\r\n            this.deps.push(dep)\r\n            this.depsId.add(id)\r\n            dep.addWatcher(this) // dep记录watcher\r\n        }\r\n    }\r\n    depend(){\r\n        let i = this.deps.length\r\n        while(i--){\r\n            this.deps[i].depend()\r\n        }\r\n    }\r\n    evaluate(){\r\n        this.value = this.get()\r\n        this.dirty = false\r\n    }\r\n    get(){\r\n        pushTarget(this)\r\n        let value =  this.getter.call(this.vm) //渲染方法\r\n        popTarget(this)\r\n        return value\r\n    }\r\n    update(){\r\n        if(this.lazy){\r\n            this.dirty = true\r\n        }else{\r\n            queueWatcher(this)\r\n        }\r\n    }\r\n    run(){\r\n        let oldValue = this.value\r\n        let newVlaue = this.get()\r\n        if(this.options.user){\r\n            this.cb.call(this.vm,oldValue,newVlaue)\r\n        }\r\n    }\r\n}\r\n\r\n\r\n// 存储watcher\r\nlet queue = []\r\nlet has = {}\r\nlet pending = false\r\nfunction flushSchedulerQueue(){\r\n    const flushQueue = queue.slice(0)\r\n    if(pending){\r\n        // 更新视图 将记录的watcher 统一更新\r\n        flushQueue.forEach(p=>{p.run()})\r\n\r\n        has = {}\r\n        queue = []\r\n        pending = false\r\n    }\r\n}\r\n\r\n// 属性修改时进行批量操作\r\nfunction queueWatcher(watcher){ \r\n    const id= watcher.id\r\n    // \r\n    if(!has[id]){ // 如果没有记录这个watcher，就记录\r\n        has[id] = true \r\n        queue.push(watcher)\r\n        if(!pending){ // 第一次就开启异步操作\r\n            nextTick(flushSchedulerQueue)\r\n            pending = true\r\n        }\r\n        \r\n    }\r\n}\r\n\r\nlet callbacks = []\r\nlet waiting = false\r\n\r\nfunction flushCallbacks(){\r\n    let cbs = callbacks.slice(0)\r\n    callbacks = []\r\n    waiting = true\r\n    cbs.forEach(cb=>cb())\r\n}\r\n// 源码中的nextTick采用了优雅降级的方法\r\n//  promise -> MutationObserver -> setImmediate ->setTimeout\r\n\r\nlet timerFunc\r\nif(Promise){\r\n    timerFunc=()=>{\r\n        Promise.resolve().then(flushCallbacks)\r\n    }\r\n}else if(MutationObserver){\r\n    let observer = new MutationObserver(flushCallbacks)\r\n    let textNode = document.createTextNode(1)\r\n    observer.observe(textNode,{\r\n        // 监听文字变化，如果变化就执行 flushCallbacks\r\n        characterData:true  \r\n    })\r\n    timerFunc = ()=>{\r\n        // 修改值，就会被监听到\r\n        textNode.textContent = 2 \r\n    }\r\n}else if(setImmediate){\r\n    timerFunc = () =>{\r\n        setImmediate(flushCallbacks)\r\n    }\r\n}else{\r\n    timerFunc = ()=>{\r\n        setTimeout(flushCallbacks)\r\n    }\r\n}\r\n\r\nexport function nextTick(cb){\r\n    // 维护nextTick中的callback方法，多次调用nextTick并不是使用了多个异步操作\r\n    callbacks.push(cb) \r\n\r\n    if(!waiting){\r\n        timerFunc()\r\n        waiting=true\r\n    }\r\n}\r\n\r\n","export function createElementVNode(vm,tag,data={},...children) {\r\n    if(data==null){\r\n        data = {}\r\n    }\r\n    let key = data.key\r\n    if(key){\r\n        delete data.key\r\n    }\r\n    return vnode(vm,tag,key,data,children)\r\n}\r\n\r\nexport function createTextVNode(vm,text){\r\n    return vnode(vm,undefined,undefined,undefined,undefined,text)\r\n}\r\n\r\nfunction vnode(vm,tag,key,data,children,text){\r\n    return {\r\n        vm,\r\n        tag,\r\n        key,\r\n        data,\r\n        children,\r\n        text\r\n    }\r\n}","import { wtacher } from \"./observe/watcher\";\r\nimport { createElementVNode, createTextVNode } from \"./vdom\";\r\n\r\nexport function initLifeCycle(Vue){\r\n    Vue.prototype._render = function(){\r\n        // 当渲染的时候会去实例中取值，我们就可以将属性和视图绑定在一起\r\n\r\n        return this.$options.render.call(this)\r\n    }\r\n\r\n    Vue.prototype._c = function(){\r\n        return createElementVNode(this,...arguments)\r\n    }    \r\n    Vue.prototype._v = function(){\r\n        return createTextVNode(this,...arguments)\r\n    }\r\n    Vue.prototype._s = function(value){\r\n        if(typeof value !== 'object')return value\r\n        return JSON.stringify(value)\r\n    }\r\n\r\n\r\n\r\n    Vue.prototype._update = function(vnode){\r\n        const vm = this\r\n        const el = vm.$el\r\n        // 既有初始化操作，又有更新\r\n        \r\n        vm.$el= patch(el,vnode)\r\n        \r\n    }\r\n}\r\n\r\nexport function mountComponent(vm,el){\r\n    // 1.调用rander函数，生成虚拟节点 虚拟dom\r\n    vm.$el = el\r\n    \r\n    const updateComponent =()=>{\r\n        vm._update(vm._render())\r\n    }\r\n    let watcher= new wtacher(vm,updateComponent,true)\r\n\r\n    // 2.根据虚拟dom，生成节点\r\n\r\n\r\n    // 3.插入到真实dom中\r\n}\r\n\r\nfunction patchProps(el,props){\r\n    for(let key in props){\r\n        if(key === 'style'){\r\n            for(let styleName in props.style){\r\n                el.style[styleName] = props.style[styleName]\r\n            }\r\n            continue\r\n        }\r\n        el.setAttribute(key,props[key])\r\n    }\r\n}\r\n\r\nfunction createElm(vnode){\r\n    const {tag,data,children,text} = vnode\r\n    if(typeof tag === 'string'){\r\n        vnode.el = document.createElement(tag)\r\n        patchProps(vnode.el,data)\r\n        children.forEach(child => {\r\n            vnode.el.appendChild(createElm(child))\r\n        });\r\n    }else{\r\n        vnode.el = document.createTextNode(text)\r\n    }\r\n    return vnode.el\r\n    \r\n\r\n}\r\n\r\nfunction patch(oldVNode,vnode){\r\n    const isRealElement = oldVNode.nodeType\r\n    if(isRealElement){\r\n        const elm = oldVNode\r\n\r\n        const parentElm = oldVNode.parentNode\r\n        let newElm = createElm(vnode)\r\n        parentElm.insertBefore(newElm,elm.nextSibling)\r\n        parentElm.removeChild(elm)\r\n        return newElm\r\n    }else{\r\n        // diff算法\r\n    }\r\n\r\n    \r\n}\r\n\r\nexport function callHook(vm,hook){\r\n    const handles= vm.$options[hook]\r\n    if(handles){\r\n        handles.forEach(handler=>handler())\r\n    }\r\n    \r\n}","let oldArrayProto = Array.prototype\r\n\r\nconst methods=[\r\n    'push',\r\n    'pop',\r\n    'shift',\r\n    'unshift',\r\n    'reverse',\r\n    'splice',\r\n    'sort'\r\n]\r\n\r\nexport let newArrayProto = Object.create(oldArrayProto)\r\n\r\nmethods.forEach(method=>{\r\n    newArrayProto[method] = function(...arg){\r\n        // 还是调用原arr上的方法，只是修改this的指向\r\n        let result =oldArrayProto[method].call(this,...arg)\r\n\r\n        let ob = this.__ob__\r\n        // 用来对数组中新增的对象进行劫持\r\n        let insertValue //是一个数组\r\n        switch(method){\r\n            case 'push':\r\n            case \"unshift\":\r\n                insertValue = arg;\r\n                break;\r\n            case 'splice':\r\n                insertValue = arg.slice(2)\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n        debugger\r\n\r\n        // this.walk(insertValue)\r\n        if(insertValue){\r\n            ob.observeArray(insertValue)\r\n        }\r\n        ob.dep.notify() // 数组变化了，通知对应的watcher\r\n        \r\n        return result\r\n    }\r\n})","import { newArrayProto } from \"./array\";\r\nimport { Dep } from \"./dep\";\r\n\r\nclass Oberver{\r\n    constructor(data){\r\n        this.dep = new Dep()\r\n        // 在data中新增一个属性_ob_ 当作实例，用来调用实例上的方法\r\n        Object.defineProperty(data,'__ob__',{\r\n            value:this,\r\n            // 将ob设置为不可枚举的，防止爆栈\r\n            enumerable: false \r\n        })\r\n        if(Array.isArray(data)){\r\n            data.__proto__ = newArrayProto\r\n            this.observeArray(data)\r\n        }else{\r\n            this.walk(data)\r\n        }\r\n    }\r\n    walk(data){\r\n        Object.keys(data).forEach(key =>  defineReactive(data,key,data[key]));\r\n    }\r\n    observeArray(data){\r\n        // 劫持 数组中的对象\r\n        data.forEach(key=>observe(key))\r\n    }\r\n}\r\n\r\nfunction dependArray(value){\r\n    for(let i=0;i<value.length;i++){\r\n        let current = value[i]\r\n        current.__ob__.dep.depend()\r\n        if(Array.isArray(current)){\r\n            dependArray(current)\r\n        }\r\n    }\r\n}\r\n\r\n// 数据劫持函数\r\nfunction defineReactive(target,key,value){\r\n    let childOb = observe(value) // 对所有对象精选属性劫持，childOb.dep 用来收集依赖\r\n    let dep = new Dep()\r\n    debugger\r\n    Object.defineProperty(target,key,{\r\n        get(){\r\n            if(Dep.target){\r\n                dep.depend()\r\n                if(childOb){\r\n                    childOb.dep.depend() // 让对象和数据也进行依赖收集\r\n                }\r\n\r\n                if(Array.isArray(value)){\r\n                    dependArray(value)\r\n                }\r\n            }\r\n            return value\r\n        },\r\n        set(newValue){\r\n            if(newValue === value)return\r\n            observe(newValue)\r\n            value = newValue\r\n            dep.notify() // 属性发生改变，就去通知对应的watcher去更新\r\n        }\r\n    })\r\n}\r\n\r\nexport function observe(data){\r\n    // 不是对象的不劫持\r\n    if(typeof data!=='object' || data === null){\r\n        return\r\n    }\r\n\r\n    if(data.__ob__ instanceof Oberver){\r\n        return\r\n    }\r\n\r\n    return new Oberver(data)\r\n}","import { Dep } from \"./observe/dep\";\r\nimport { observe } from \"./observe/index\";\r\nimport { wtacher } from \"./observe/watcher\";\r\n\r\nexport function initState(vm){\r\n    const opts = vm.$options\r\n    if(opts.data){\r\n        initData(vm)\r\n    }\r\n    if(opts.computed){\r\n        initComputed(vm)\r\n    }\r\n\r\n    if(opts.watch){\r\n        initWatch(vm)\r\n    }\r\n}\r\n\r\nfunction initWatch(vm){\r\n    let watch = vm.$options.watch\r\n    for(let key in watch){\r\n        // 字符串、数组 函数\r\n        const handler = watch[key]\r\n        if(Array.isArray(handler)){\r\n            for(let i =0; i<handler.length ;i++){\r\n                createWatcher(vm,key,handler[i])\r\n            }\r\n        }else{\r\n            createWatcher(vm,key,handler)\r\n        }\r\n    }\r\n    console.log(watch);\r\n}\r\n\r\nfunction createWatcher(vm,key,handler){\r\n    if(typeof handler === \"string\"){\r\n        handler = vm[handler]\r\n    }\r\n    return vm.$watch(key,handler)\r\n}\r\n\r\nfunction proxy(vm,target,key){\r\n    Object.defineProperty(vm,key,{\r\n        get(){\r\n            return vm[target][key]\r\n        },\r\n        set(newValue){\r\n            vm[target][key] = newValue\r\n        }\r\n    })\r\n}\r\n\r\nfunction initData(vm){\r\n    let data = vm.$options.data\r\n    data = typeof data === 'function' ? data.call(vm): data\r\n    vm._data = data\r\n    // 数据劫持\r\n    observe(data)\r\n\r\n    // 用vm._data 来劫持 vm  也就是取vm.xxx = vm._data.xxx\r\n    for(let key in data){\r\n        proxy(vm,'_data',key)\r\n    }\r\n}\r\n\r\nfunction initComputed(vm){\r\n    const computed = vm.$options.computed\r\n    const watchers = vm._computedWatchers = {}\r\n\r\n    for(let key in computed){\r\n        const userDef = computed[key]\r\n        const fn = typeof userDef === 'function' ? userDef : userDef.get\r\n        watchers[key] = new wtacher(vm,fn,{lazy:true})\r\n        defineComputed(vm,key,userDef)\r\n    }\r\n    // vm._computed\r\n}\r\n\r\nfunction defineComputed(vm,key,userDef){\r\n    const setter = userDef.set || (()=>{})\r\n    Object.defineProperty(vm,key,{\r\n        get: createComputedGetter(key),\r\n        set: setter\r\n    })\r\n}\r\n\r\n// 计算属性不会收集依赖，只会把自己的dep去记录更外层次的watcher\r\nfunction createComputedGetter(key){\r\n    return function(){\r\n        const watcher = this._computedWatchers[key]\r\n        if(watcher.dirty){\r\n            // 如果是dirty为true 就去执行用传的函数\r\n            watcher.evaluate()\r\n        }\r\n        if(Dep.target){ // 计算属性出栈后，还有渲染watcher，我应该让计算属性watcher里面的属性，也去收集上一层的watcher\r\n            watcher.depend()\r\n        }\r\n        return watcher.value\r\n    }\r\n}","import { compliToFunction } from \"./complier/index\"\r\nimport { callHook, mountComponent } from \"./lifeCycle\"\r\nimport { initState } from \"./state\"\r\nimport { mereOptions } from \"./utils\"\r\n\r\nexport default function initMixin(Vue){      // 就是给Vue增加init方法的\r\n    Vue.prototype._init = function(options){ // 用于初始化操作\r\n        const vm = this\r\n        // 将实例的参数 放到实例上，以便于其他函数使用\r\n        vm.$options = mereOptions(this.constructor.options,options)\r\n\r\n        callHook(vm,'beforeCreate')\r\n        // 初始化状态,初始化计算属性、watch\r\n        initState(vm)\r\n        callHook(vm,'created')\r\n\r\n        // 挂载\r\n        if(options.el){\r\n            vm.$mount(options.el)\r\n        }\r\n    }\r\n\r\n    Vue.prototype.$mount = function(el){\r\n        el = document.querySelector(el)\r\n        const vm = this\r\n        let ops = vm.$options\r\n        let template\r\n        if(!ops.render){ // 先检查有没有render函数\r\n            if(!ops.template && el){ //没有template 没有tempalte 采用外部的tempalte\r\n                template = el.outerHTML // 没有写模板，但写了el\r\n            }else{\r\n                if(!el){\r\n                    template = ops.template // ；没有el，则采用模板的内容\r\n                }\r\n            }\r\n\r\n            // 写了template 就用它\r\n            if(template){\r\n                const render = compliToFunction(template)\r\n                ops.render = render\r\n            }\r\n        }\r\n\r\n        mountComponent(vm,el)\r\n        \r\n\r\n        ops.render; // 最终都会被编译成render\r\n    }\r\n}\r\n\r\n// vue核心原理\r\n// 1.创造响应式数据 2.将模板转化成ast语法树 \r\n// 3.将ast语法树转换成render函数 4 后续每次数据更新可以只执行render函数 （无需再次执行ast转化的过程）\r\n// render函数回去产生虚拟节点\r\n// 根据生成的虚拟节点创造真实的dom","import { initGlobalAPI } from './globalAPI.js';\r\nimport initMixin from './init.js'\r\nimport { initLifeCycle } from './lifeCycle.js';\r\nimport { nextTick, wtacher } from './observe/watcher.js';\r\n\r\nfunction Vue(options){\r\n    this._init(options)\r\n}\r\nVue.prototype.$nextTick = nextTick\r\ninitMixin(Vue)\r\ninitLifeCycle(Vue)\r\ninitGlobalAPI(Vue)\r\n\r\n// Vue最终都是调用这个触发\r\nVue.prototype.$watch = function (experOrFn,cb){\r\n    // experOrFn可能是 字符串或者函数\r\n    new wtacher(this,experOrFn,{user:true},cb)\r\n}\r\n\r\nexport default Vue\r\n"],"names":["starts","LIFECYCLE","forEach","hook","p","c","concat","mereOptions","parent","child","options","key","mergeField","hasOwnProperty","initGlobalAPI","Vue","mixin","ncname","qnameCapture","startTagOpen","RegExp","endTag","attribute","startTagClose","parseHTML","html","ELEMENT_TYPE","TEXT_TYPE","root","currentParent","stack","createASTElement","tag","attrs","type","children","start","node","push","chars","text","trim","end","pop","length","advance","n","substring","parseStartTag","match","tagName","attr","value","textEnd","indexOf","startTagMatch","endTagMatch","genProps","str","item","styleArr","split","obj","styl","JSON","stringify","slice","defaultTagRE","gen","codegen","test","token","lastIndex","exec","index","join","genChildren","map","ast","code","compliToFunction","template","render","Function","id","Dep","subs","target","addDep","watcher","update","pushTarget","popTarget","wtacher","vm","exprOrFn","cb","randerWatcher","getter","deps","depsId","Set","dirty","lazy","undefined","get","dep","has","add","addWatcher","i","depend","call","queueWatcher","oldValue","newVlaue","user","queue","pending","flushSchedulerQueue","flushQueue","run","nextTick","callbacks","waiting","flushCallbacks","cbs","timerFunc","Promise","resolve","then","MutationObserver","observer","textNode","document","createTextNode","observe","characterData","textContent","setImmediate","setTimeout","createElementVNode","data","vnode","createTextVNode","initLifeCycle","prototype","_render","$options","_c","arguments","_v","_s","_update","el","$el","patch","mountComponent","updateComponent","patchProps","props","styleName","style","setAttribute","createElm","createElement","appendChild","oldVNode","isRealElement","nodeType","elm","parentElm","parentNode","newElm","insertBefore","nextSibling","removeChild","callHook","handles","handler","oldArrayProto","Array","methods","newArrayProto","Object","create","method","arg","result","ob","__ob__","insertValue","observeArray","notify","Oberver","defineProperty","enumerable","isArray","__proto__","walk","keys","defineReactive","dependArray","current","childOb","set","newValue","initState","opts","initData","computed","initComputed","watch","initWatch","createWatcher","console","log","$watch","proxy","_data","watchers","_computedWatchers","userDef","fn","defineComputed","setter","createComputedGetter","evaluate","initMixin","_init","constructor","$mount","querySelector","ops","outerHTML","$nextTick","experOrFn"],"mappings":"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"}